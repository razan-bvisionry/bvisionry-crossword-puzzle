<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crossword Puzzle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .puzzle-grid {
            border-collapse: collapse;
            table-layout: fixed;
            margin: 0 auto;
        }
        .puzzle-grid td {
            width: 40px;
            height: 40px;
            text-align: center;
            vertical-align: middle;
            border: 1px solid #d1d5db;
            padding: 0;
            position: relative;
        }
        .puzzle-grid input {
            width: 100%;
            height: 100%;
            text-align: center;
            text-transform: uppercase;
            font-size: 1.25rem;
            font-weight: 600;
            border: none;
            outline: none;
            background-color: transparent;
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }
        .puzzle-grid .bg-black {
            background-color: #1f2937;
            border: 1px solid #1f2937;
        }
        .cell-number {
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 0.65rem;
            font-weight: 700;
            color: #4b5563;
        }
        .clue-list li {
            margin-bottom: 0.5rem;
        }
        .clue-list li.completed {
            text-decoration: line-through;
            color: #6b7280;
        }
        .button {
            transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
            transform: translateY(0);
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .button:active {
            transform: translateY(1px);
            box-shadow: none;
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
        }
        .highlight {
            background-color: #bfdbfe;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">
    <div class="max-w-7xl w-full">
        <h1 class="text-4xl sm:text-5xl font-extrabold text-center text-gray-800 mb-6 sm:mb-8 tracking-tight">
            Crossword Puzzle
        </h1>

        <div class="flex flex-col lg:flex-row gap-8 lg:gap-12 w-full">
            <!-- Puzzle Grid Container -->
            <div id="crossword-container" class="flex-grow flex items-center justify-center p-4 bg-white shadow-xl rounded-2xl">
                <!-- The puzzle grid will be generated here by JavaScript -->
            </div>

            <!-- Clues and Controls Container -->
            <div class="flex flex-col gap-8 flex-grow lg:flex-grow-0 lg:w-96 p-6 bg-white shadow-xl rounded-2xl">
                <div>
                    <h2 class="text-2xl font-bold mb-4">Across</h2>
                    <ol id="across-clues" class="clue-list text-gray-700"></ol>
                </div>
                
                <div>
                    <h2 class="text-2xl font-bold mb-4">Down</h2>
                    <ol id="down-clues" class="clue-list text-gray-700"></ol>
                </div>

                <div class="flex flex-col sm:flex-row gap-4">
                    <button id="check-button" class="button w-full sm:w-1/2 bg-blue-500 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-blue-600 transition-colors">
                        Check Answers
                    </button>
                    <button id="reset-button" class="button w-full sm:w-1/2 bg-gray-200 text-gray-800 font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-gray-300 transition-colors">
                        Reset
                    </button>
                </div>
            </div>
        </div>

        <!-- Message Box for feedback -->
        <div id="message-box" class="message-box hidden p-6 bg-green-500 text-white font-bold rounded-2xl shadow-2xl z-50">
            <!-- Messages will be displayed here -->
        </div>

    </div>

    <script>
        // Define the puzzle data: words, their starting positions, and clues.
        const puzzleData = {
            width: 15,
            height: 15,
            words: [
                {
                    word: "PYTHON",
                    clue: "A popular programming language known for its readability.",
                    direction: "across",
                    startRow: 3,
                    startCol: 2,
                    number: 1
                },
                {
                    word: "HTML",
                    clue: "The standard markup language for creating web pages.",
                    direction: "down",
                    startRow: 3,
                    startCol: 2,
                    number: 1
                },
                {
                    word: "CSS",
                    clue: "Stylesheet language used for describing the presentation of a document.",
                    direction: "across",
                    startRow: 5,
                    startCol: 7,
                    number: 2
                },
                {
                    word: "JAVA",
                    clue: "Object-oriented language used for enterprise-level applications.",
                    direction: "down",
                    startRow: 2,
                    startCol: 11,
                    number: 3
                },
                {
                    word: "REACT",
                    clue: "A JavaScript library for building user interfaces, maintained by Meta.",
                    direction: "down",
                    startRow: 7,
                    startCol: 8,
                    number: 4
                },
                {
                    word: "API",
                    clue: "An interface that allows software applications to communicate with each other.",
                    direction: "across",
                    startRow: 7,
                    startCol: 6,
                    number: 5
                }
            ]
        };

        const crosswordContainer = document.getElementById('crossword-container');
        const acrossCluesList = document.getElementById('across-clues');
        const downCluesList = document.getElementById('down-clues');
        const checkButton = document.getElementById('check-button');
        const resetButton = document.getElementById('reset-button');
        const messageBox = document.getElementById('message-box');

        let isCorrect = {};
        let highlightedCells = [];

        // Function to create the grid from the puzzle data
        function createGrid() {
            const grid = Array.from({ length: puzzleData.height }, () =>
                Array(puzzleData.width).fill(null)
            );

            // Populate the grid with word data (numbers and orientation)
            puzzleData.words.forEach(wordData => {
                let r = wordData.startRow;
                let c = wordData.startCol;

                // Mark the starting cell with the number
                if (grid[r][c] === null) {
                    grid[r][c] = { number: wordData.number };
                } else {
                    grid[r][c].number = wordData.number;
                }

                // Fill the path of the word with a placeholder
                for (let i = 0; i < wordData.word.length; i++) {
                    if (wordData.direction === "across") {
                        grid[r][c + i] = grid[r][c + i] || {};
                        grid[r][c + i].wordAcross = wordData.word;
                        grid[r][c + i].clueNumberAcross = wordData.number;
                    } else { // "down"
                        grid[r + i][c] = grid[r + i][c] || {};
                        grid[r + i][c].wordDown = wordData.word;
                        grid[r + i][c].clueNumberDown = wordData.number;
                    }
                }
            });

            // Create the HTML table
            const table = document.createElement('table');
            table.className = "puzzle-grid";

            for (let r = 0; r < puzzleData.height; r++) {
                const row = document.createElement('tr');
                for (let c = 0; c < puzzleData.width; c++) {
                    const cell = document.createElement('td');
                    const cellData = grid[r][c];

                    if (cellData) {
                        // Create input for letter
                        const input = document.createElement('input');
                        input.type = 'text';
                        input.maxLength = 1;
                        input.className = "puzzle-cell text-gray-900";
                        input.dataset.row = r;
                        input.dataset.col = c;

                        // Add data attributes for word/clue lookup
                        if (cellData.wordAcross) {
                            input.dataset.wordAcross = cellData.wordAcross;
                            input.dataset.clueNumberAcross = cellData.clueNumberAcross;
                        }
                        if (cellData.wordDown) {
                            input.dataset.wordDown = cellData.wordDown;
                            input.dataset.clueNumberDown = cellData.clueNumberDown;
                        }

                        // Add number if it's a starting cell
                        if (cellData.number) {
                            const numberSpan = document.createElement('span');
                            numberSpan.className = "cell-number";
                            numberSpan.textContent = cellData.number;
                            cell.appendChild(numberSpan);
                        }

                        cell.appendChild(input);
                    } else {
                        // Black cell
                        cell.className = "bg-black";
                    }

                    row.appendChild(cell);
                }
                table.appendChild(row);
            }

            crosswordContainer.appendChild(table);
        }

        // Function to create the clue lists
        function createClueLists() {
            const acrossClues = puzzleData.words.filter(word => word.direction === "across");
            const downClues = puzzleData.words.filter(word => word.direction === "down");

            acrossClues.sort((a, b) => a.number - b.number);
            downClues.sort((a, b) => a.number - b.number);

            acrossClues.forEach(clue => {
                const li = document.createElement('li');
                li.id = `clue-across-${clue.number}`;
                li.textContent = `${clue.number}. ${clue.clue}`;
                acrossCluesList.appendChild(li);
            });

            downClues.forEach(clue => {
                const li = document.createElement('li');
                li.id = `clue-down-${clue.number}`;
                li.textContent = `${clue.number}. ${clue.clue}`;
                downCluesList.appendChild(li);
            });
        }

        // Function to check the answers
        function checkAnswers() {
            let allCorrect = true;
            let totalWords = puzzleData.words.length;
            let completedWords = 0;

            // Clear previous highlighting
            clearHighlighting();

            puzzleData.words.forEach(wordData => {
                let wordCorrect = true;
                const cellsToHighlight = [];

                for (let i = 0; i < wordData.word.length; i++) {
                    let r = wordData.startRow + (wordData.direction === "down" ? i : 0);
                    let c = wordData.startCol + (wordData.direction === "across" ? i : 0);

                    const input = document.querySelector(`input[data-row='${r}'][data-col='${c}']`);
                    if (input) {
                        cellsToHighlight.push(input);
                        const userChar = input.value.toUpperCase();
                        const correctChar = wordData.word[i].toUpperCase();

                        if (userChar !== correctChar || userChar === "") {
                            wordCorrect = false;
                        }
                    }
                }
                
                if (wordCorrect) {
                    completedWords++;
                    isCorrect[wordData.word] = true;
                    // Highlight correct cells in green
                    cellsToHighlight.forEach(cell => cell.style.backgroundColor = '#dcfce7');
                    // Mark clue as completed
                    const clueElement = document.getElementById(`clue-${wordData.direction}-${wordData.number}`);
                    if (clueElement) {
                        clueElement.classList.add('completed');
                    }
                } else {
                    allCorrect = false;
                    isCorrect[wordData.word] = false;
                    // Highlight incorrect cells in red
                    cellsToHighlight.forEach(cell => cell.style.backgroundColor = '#fee2e2');
                }
                highlightedCells.push(...cellsToHighlight);
            });

            if (allCorrect) {
                showMessage("Congratulations! You've solved the puzzle!", "bg-green-500");
            } else {
                showMessage(`You've completed ${completedWords} out of ${totalWords} words. Keep trying!`, "bg-yellow-500");
            }
        }

        // Function to show a temporary message
        function showMessage(message, colorClass) {
            messageBox.textContent = message;
            messageBox.className = `message-box p-6 font-bold rounded-2xl shadow-2xl z-50 transition-all duration-500 ${colorClass}`;
            messageBox.classList.remove('hidden');

            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 3000); // Hide after 3 seconds
        }

        // Function to clear any highlighting on the grid
        function clearHighlighting() {
            highlightedCells.forEach(cell => cell.style.backgroundColor = '');
            highlightedCells = [];
        }

        // Function to reset the puzzle
        function resetPuzzle() {
            const inputs = document.querySelectorAll('.puzzle-cell');
            inputs.forEach(input => {
                input.value = '';
                input.style.backgroundColor = '';
            });
            isCorrect = {};
            const clues = document.querySelectorAll('.clue-list li');
            clues.forEach(clue => clue.classList.remove('completed'));
            showMessage("Puzzle reset!", "bg-gray-400");
        }

        // Add event listeners for puzzle interaction
        function addEventListeners() {
            checkButton.addEventListener('click', checkAnswers);
            resetButton.addEventListener('click', resetPuzzle);
            crosswordContainer.addEventListener('focusin', handleFocus);
            crosswordContainer.addEventListener('focusout', handleBlur);
        }

        // Highlight cells of the selected word
        function handleFocus(event) {
            const input = event.target;
            clearHighlighting();

            if (input.dataset.wordAcross) {
                // Highlight across word
                const wordData = puzzleData.words.find(w => w.word === input.dataset.wordAcross);
                for (let i = 0; i < wordData.word.length; i++) {
                    const r = wordData.startRow;
                    const c = wordData.startCol + i;
                    const cell = document.querySelector(`input[data-row='${r}'][data-col='${c}']`);
                    if (cell) {
                        cell.classList.add('highlight');
                        highlightedCells.push(cell);
                    }
                }
            }
            if (input.dataset.wordDown) {
                // Highlight down word
                const wordData = puzzleData.words.find(w => w.word === input.dataset.wordDown);
                for (let i = 0; i < wordData.word.length; i++) {
                    const r = wordData.startRow + i;
                    const c = wordData.startCol;
                    const cell = document.querySelector(`input[data-row='${r}'][data-col='${c}']`);
                    if (cell) {
                        cell.classList.add('highlight');
                        highlightedCells.push(cell);
                    }
                }
            }
        }

        function handleBlur(event) {
            // Clear highlighting when focus is lost
            // A small delay to allow for clicking on a new input
            setTimeout(clearHighlighting, 10);
        }
        
        // Initial setup
        window.onload = function() {
            createGrid();
            createClueLists();
            addEventListeners();
        };

    </script>
</body>
</html>
