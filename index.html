<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crossword Puzzle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .puzzle-grid {
            border-collapse: collapse;
            table-layout: fixed;
            margin: 0 auto;
        }
        .puzzle-grid td {
            width: 40px;
            height: 40px;
            text-align: center;
            vertical-align: middle;
            border: 1px solid #d1d5db;
            padding: 0;
            position: relative;
        }
        .puzzle-grid input {
            width: 100%;
            height: 100%;
            text-align: center;
            text-transform: uppercase;
            font-size: 1.25rem;
            font-weight: 600;
            border: none;
            outline: none;
            background-color: transparent;
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }
        .puzzle-grid .bg-black {
            background-color: #1f2937;
            border: 1px solid #1f2937;
        }
        .cell-number {
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 0.65rem;
            font-weight: 700;
            color: #4b5563;
        }
        .clue-list li {
            margin-bottom: 0.5rem;
            cursor: pointer;
        }
        .clue-list li.completed {
            text-decoration: line-through;
            color: #6b7280;
        }
        .button {
            transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
            transform: translateY(0);
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .button:active {
            transform: translateY(1px);
            box-shadow: none;
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
        }
        .highlight-clue {
            background-color: #bfdbfe;
        }
        .correct-cell {
            border: 2px solid #16a34a;
        }
        .incorrect-cell {
            border: 2px solid #ef4444;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">
    <div class="max-w-7xl w-full">
        <h1 class="text-4xl sm:text-5xl font-extrabold text-center text-gray-800 mb-6 sm:mb-8 tracking-tight">
            Crossword Puzzle
        </h1>

        <div class="flex flex-col lg:flex-row gap-8 lg:gap-12 w-full">
            <!-- Puzzle Grid Container -->
            <div id="crossword-container" class="flex-grow flex items-center justify-center p-4 bg-white shadow-xl rounded-2xl">
                <!-- The puzzle grid will be generated here by JavaScript -->
            </div>

            <!-- Clues and Controls Container -->
            <div class="flex flex-col gap-8 flex-grow lg:flex-grow-0 lg:w-96 p-6 bg-white shadow-xl rounded-2xl">
                <div>
                    <h2 class="text-2xl font-bold mb-4">Across</h2>
                    <ol id="across-clues" class="clue-list text-gray-700"></ol>
                </div>
                
                <div>
                    <h2 class="text-2xl font-bold mb-4">Down</h2>
                    <ol id="down-clues" class="clue-list text-gray-700"></ol>
                </div>

                <div class="flex flex-col gap-4">
                    <button id="check-button" class="button w-full bg-blue-500 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-blue-600 transition-colors">
                        Check Answers
                    </button>
                    <button id="reveal-letter-button" class="button w-full bg-yellow-500 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-yellow-600 transition-colors">
                        Reveal Letter
                    </button>
                    <button id="reveal-all-button" class="button w-full bg-red-500 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-red-600 transition-colors">
                        Reveal All
                    </button>
                    <button id="reset-button" class="button w-full bg-gray-200 text-gray-800 font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-gray-300 transition-colors">
                        Reset
                    </button>
                </div>
            </div>
        </div>

        <!-- Message Box for feedback -->
        <div id="message-box" class="message-box hidden p-6 bg-green-500 text-white font-bold rounded-2xl shadow-2xl z-50">
            <!-- Messages will be displayed here -->
        </div>

    </div>

    <script>
        // Define the puzzle data with carefully placed words for a solid grid
        const puzzleData = {
            width: 15,
            height: 15,
            words: [
                {
                    word: "PROGRAMMING",
                    clue: "The process of creating software or applications.",
                    direction: "across",
                    startRow: 3,
                    startCol: 1,
                    number: 1
                },
                {
                    word: "JAVASCRIPT",
                    clue: "A popular scripting language for web pages.",
                    direction: "down",
                    startRow: 1,
                    startCol: 3,
                    number: 2
                },
                {
                    word: "HTML",
                    clue: "The standard markup language for web pages.",
                    direction: "across",
                    startRow: 5,
                    startCol: 4,
                    number: 3
                },
                {
                    word: "CODE",
                    clue: "A set of instructions written in a programming language.",
                    direction: "down",
                    startRow: 5,
                    startCol: 8,
                    number: 4
                },
                {
                    word: "SOFTWARE",
                    clue: "A collection of instructions that tell a computer what to do.",
                    direction: "across",
                    startRow: 9,
                    startCol: 6,
                    number: 5
                },
                {
                    word: "ENGINEER",
                    clue: "A person who designs and builds complex systems.",
                    direction: "down",
                    startRow: 7,
                    startCol: 6,
                    number: 6
                },
                {
                    word: "PYTHON",
                    clue: "A versatile programming language known for its readability.",
                    direction: "across",
                    startRow: 10,
                    startCol: 1,
                    number: 7
                },
                {
                    word: "VARIABLE",
                    clue: "A storage location paired with an associated symbolic name.",
                    direction: "down",
                    startRow: 7,
                    startCol: 1,
                    number: 8
                }
            ]
        };

        const crosswordContainer = document.getElementById('crossword-container');
        const acrossCluesList = document.getElementById('across-clues');
        const downCluesList = document.getElementById('down-clues');
        const checkButton = document.getElementById('check-button');
        const revealLetterButton = document.getElementById('reveal-letter-button');
        const revealAllButton = document.getElementById('reveal-all-button');
        const resetButton = document.getElementById('reset-button');
        const messageBox = document.getElementById('message-box');

        let highlightedCells = [];
        let activeInput = null;

        // Function to create the grid from the puzzle data
        function createGrid() {
            const grid = Array.from({ length: puzzleData.height }, () =>
                Array(puzzleData.width).fill(null)
            );

            // Populate the grid with word data (numbers and orientation)
            puzzleData.words.forEach(wordData => {
                let r = wordData.startRow;
                let c = wordData.startCol;

                if (grid[r][c] === null) {
                    grid[r][c] = { number: wordData.number };
                } else {
                    grid[r][c].number = wordData.number;
                }

                for (let i = 0; i < wordData.word.length; i++) {
                    if (wordData.direction === "across") {
                        grid[r][c + i] = grid[r][c + i] || {};
                        grid[r][c + i].wordAcross = wordData.word;
                        grid[r][c + i].clueNumberAcross = wordData.number;
                    } else { // "down"
                        grid[r + i][c] = grid[r + i][c] || {};
                        grid[r + i][c].wordDown = wordData.word;
                        grid[r + i][c].clueNumberDown = wordData.number;
                    }
                }
            });

            // Create the HTML table
            const table = document.createElement('table');
            table.className = "puzzle-grid";

            for (let r = 0; r < puzzleData.height; r++) {
                const row = document.createElement('tr');
                for (let c = 0; c < puzzleData.width; c++) {
                    const cell = document.createElement('td');
                    const cellData = grid[r][c];

                    if (cellData) {
                        const input = document.createElement('input');
                        input.type = 'text';
                        input.maxLength = 1;
                        input.className = "puzzle-cell text-gray-900";
                        input.dataset.row = r;
                        input.dataset.col = c;
                        
                        if (cellData.clueNumberAcross) {
                            input.dataset.clueNumberAcross = cellData.clueNumberAcross;
                        }
                        if (cellData.clueNumberDown) {
                            input.dataset.clueNumberDown = cellData.clueNumberDown;
                        }

                        if (cellData.number) {
                            const numberSpan = document.createElement('span');
                            numberSpan.className = "cell-number";
                            numberSpan.textContent = cellData.number;
                            cell.appendChild(numberSpan);
                        }

                        cell.appendChild(input);
                    } else {
                        cell.className = "bg-black";
                    }

                    row.appendChild(cell);
                }
                table.appendChild(row);
            }

            crosswordContainer.appendChild(table);
        }

        // Function to create the clue lists
        function createClueLists() {
            const acrossClues = puzzleData.words.filter(word => word.direction === "across");
            const downClues = puzzleData.words.filter(word => word.direction === "down");

            acrossClues.sort((a, b) => a.number - b.number);
            downClues.sort((a, b) => a.number - b.number);

            acrossClues.forEach(clue => {
                const li = document.createElement('li');
                li.id = `clue-across-${clue.number}`;
                li.textContent = `${clue.number}. ${clue.clue}`;
                li.dataset.clueNumber = clue.number;
                li.dataset.direction = 'across';
                acrossCluesList.appendChild(li);
            });

            downClues.forEach(clue => {
                const li = document.createElement('li');
                li.id = `clue-down-${clue.number}`;
                li.textContent = `${clue.number}. ${clue.clue}`;
                li.dataset.clueNumber = clue.number;
                li.dataset.direction = 'down';
                downCluesList.appendChild(li);
            });
        }

        // Function to highlight cells based on a clue click
        function highlightCells(clueNumber, direction) {
            clearHighlighting();
            
            const wordData = puzzleData.words.find(w => w.number == clueNumber && w.direction === direction);
            if (!wordData) return;

            for (let i = 0; i < wordData.word.length; i++) {
                const r = wordData.startRow + (direction === "down" ? i : 0);
                const c = wordData.startCol + (direction === "across" ? i : 0);
                const cell = document.querySelector(`input[data-row='${r}'][data-col='${c}']`);
                if (cell) {
                    cell.classList.add('highlight-clue');
                    highlightedCells.push(cell);
                }
            }
        }
        
        // Function to check the answers
        function checkAnswers() {
            let allCorrect = true;
            let totalWords = puzzleData.words.length;
            let completedWords = 0;

            // Clear previous highlighting
            clearHighlighting();

            puzzleData.words.forEach(wordData => {
                let wordCorrect = true;

                for (let i = 0; i < wordData.word.length; i++) {
                    const r = wordData.startRow + (wordData.direction === "down" ? i : 0);
                    const c = wordData.startCol + (wordData.direction === "across" ? i : 0);
                    const input = document.querySelector(`input[data-row='${r}'][data-col='${c}']`);

                    if (input) {
                        const userChar = input.value.toUpperCase();
                        const correctChar = wordData.word[i].toUpperCase();

                        input.classList.remove('correct-cell', 'incorrect-cell');
                        if (userChar === correctChar && userChar !== '') {
                            input.classList.add('correct-cell');
                        } else if (userChar !== '') {
                            input.classList.add('incorrect-cell');
                            wordCorrect = false;
                            allCorrect = false;
                        } else {
                            wordCorrect = false;
                        }
                    } else {
                        wordCorrect = false;
                    }
                }
                
                if (wordCorrect) {
                    completedWords++;
                    const clueElement = document.getElementById(`clue-${wordData.direction}-${wordData.number}`);
                    if (clueElement) {
                        clueElement.classList.add('completed');
                    }
                }
            });

            if (allCorrect) {
                showMessage("Congratulations! You've solved the puzzle!", "bg-green-500");
            } else {
                showMessage(`You've completed ${completedWords} out of ${totalWords} words. Check the highlighted cells!`, "bg-yellow-500");
            }
        }
        
        // Function to reveal a single letter in the currently focused cell
        function revealLetter() {
            if (!activeInput) {
                showMessage("Click on a cell to select it first.", "bg-gray-500");
                return;
            }

            const row = activeInput.dataset.row;
            const col = activeInput.dataset.col;

            const wordDataAcross = puzzleData.words.find(w => w.direction === 'across' && w.startRow == row && w.startCol <= col && (w.startCol + w.word.length - 1) >= col);
            const wordDataDown = puzzleData.words.find(w => w.direction === 'down' && w.startCol == col && w.startRow <= row && (w.startRow + w.word.length - 1) >= row);

            let correctChar = '';
            if (wordDataAcross) {
                correctChar = wordDataAcross.word[col - wordDataAcross.startCol];
            } else if (wordDataDown) {
                correctChar = wordDataDown.word[row - wordDataDown.startRow];
            }

            if (correctChar) {
                activeInput.value = correctChar.toUpperCase();
                activeInput.classList.add('correct-cell');
                activeInput.disabled = true;
                showMessage("A letter has been revealed!", "bg-green-500");
            }
        }

        // Function to reveal all answers
        function revealAllAnswers() {
            puzzleData.words.forEach(wordData => {
                for (let i = 0; i < wordData.word.length; i++) {
                    const r = wordData.startRow + (wordData.direction === "down" ? i : 0);
                    const c = wordData.startCol + (wordData.direction === "across" ? i : 0);
                    const input = document.querySelector(`input[data-row='${r}'][data-col='${c}']`);
                    if (input) {
                        input.value = wordData.word[i].toUpperCase();
                        input.classList.add('correct-cell');
                        input.disabled = true;
                    }
                }
            });
            const clues = document.querySelectorAll('.clue-list li');
            clues.forEach(clue => clue.classList.add('completed'));
            showMessage("All answers have been revealed!", "bg-red-500");
        }

        // Function to show a temporary message
        function showMessage(message, colorClass) {
            messageBox.textContent = message;
            messageBox.className = `message-box p-6 font-bold rounded-2xl shadow-2xl z-50 transition-all duration-500 ${colorClass}`;
            messageBox.classList.remove('hidden');

            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 3000); // Hide after 3 seconds
        }

        // Function to clear any highlighting on the grid
        function clearHighlighting() {
            document.querySelectorAll('.highlight-clue').forEach(cell => cell.classList.remove('highlight-clue'));
        }

        // Function to reset the puzzle
        function resetPuzzle() {
            const inputs = document.querySelectorAll('.puzzle-cell');
            inputs.forEach(input => {
                input.value = '';
                input.style.backgroundColor = '';
                input.classList.remove('correct-cell', 'incorrect-cell');
                input.disabled = false;
            });
            const clues = document.querySelectorAll('.clue-list li');
            clues.forEach(clue => clue.classList.remove('completed'));
            clearHighlighting();
            showMessage("Puzzle reset!", "bg-gray-400");
        }

        // Add event listeners for puzzle interaction
        function addEventListeners() {
            checkButton.addEventListener('click', checkAnswers);
            revealLetterButton.addEventListener('click', revealLetter);
            revealAllButton.addEventListener('click', revealAllAnswers);
            resetButton.addEventListener('click', resetPuzzle);

            document.querySelectorAll('.clue-list li').forEach(clue => {
                clue.addEventListener('click', () => {
                    highlightCells(clue.dataset.clueNumber, clue.dataset.direction);
                });
            });

            document.querySelectorAll('.puzzle-cell').forEach(input => {
                input.addEventListener('focus', (e) => {
                    activeInput = e.target;
                });
            });
        }
        
        // Initial setup
        window.onload = function() {
            createGrid();
            createClueLists();
            addEventListeners();
        };

    </script>
</body>
</html>
