<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crossword Puzzle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0F3460;
            color: #F8F8F8;
        }
        .puzzle-grid {
            border-collapse: collapse;
            table-layout: fixed;
            margin: 0 auto;
        }
        .puzzle-grid td {
            width: 40px;
            height: 40px;
            text-align: center;
            vertical-align: middle;
            border: 1px solid #FFC107;
            padding: 0;
            position: relative;
        }
        .puzzle-grid input {
            width: 100%;
            height: 100%;
            text-align: center;
            text-transform: uppercase;
            font-size: 1.25rem;
            font-weight: 600;
            border: none;
            outline: none;
            background-color: transparent;
            -webkit-appearance: none;
            -moz-appearance: textfield;
            color: #0F3460;
        }
        .puzzle-grid .bg-black {
            background-color: #0F3460;
            border: 1px solid #0F3460;
        }
        .puzzle-grid .bg-white {
            background-color: #F8F8F8;
        }
        .cell-number {
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 0.65rem;
            font-weight: 700;
            color: #0F3460;
        }
        .clue-list li {
            margin-bottom: 0.5rem;
            cursor: pointer;
        }
        .clue-list li.completed {
            text-decoration: line-through;
            color: #FFC107;
        }
        .button {
            transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
            transform: translateY(0);
        }
        .button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .button:active:not(:disabled) {
            transform: translateY(1px);
            box-shadow: none;
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
        }
        .highlight-clue {
            background-color: #FFC107 !important;
        }
        .correct-cell {
            border: 2px solid #FFC107;
        }
        .incorrect-cell {
            border: 2px solid #ef4444;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">
    <div class="max-w-7xl w-full">
        <h1 class="text-4xl sm:text-5xl font-extrabold text-center tracking-tight" style="color: #FFC107;">
            Crossword Puzzle
        </h1>

        <div class="flex flex-col lg:flex-row gap-8 lg:gap-12 w-full mt-8">
            <!-- Puzzle Grid Container -->
            <div id="crossword-container" class="flex-grow flex items-center justify-center p-4 bg-white shadow-xl rounded-2xl">
                <!-- The puzzle grid will be generated here by JavaScript -->
            </div>

            <!-- Clues and Controls Container -->
            <div class="flex flex-col gap-8 flex-grow lg:flex-grow-0 lg:w-96 p-6 shadow-xl rounded-2xl" style="background-color: #FFC107; color: #0F3460;">
                <div>
                    <h2 class="text-2xl font-bold mb-4">Across</h2>
                    <ol id="across-clues" class="clue-list"></ol>
                </div>
                
                <div>
                    <h2 class="text-2xl font-bold mb-4">Down</h2>
                    <ol id="down-clues" class="clue-list"></ol>
                </div>

                <div class="flex flex-col gap-4">
                    <button id="check-button" class="button w-full font-bold py-3 px-6 rounded-xl shadow-lg" style="background-color: #0F3460; color: #F8F8F8;">
                        Check Answers
                    </button>
                    <button id="reveal-i-button" class="button w-full font-bold py-3 px-6 rounded-xl shadow-lg" style="background-color: #0F3460; color: #F8F8F8; display: none;">
                        Reveal 'I'
                    </button>
                    <button id="reset-button" class="button w-full font-bold py-3 px-6 rounded-xl shadow-lg" style="background-color: #F8F8F8; color: #0F3460;">
                        Reset
                    </button>
                </div>
            </div>
        </div>

        <!-- Message Box for feedback -->
        <div id="message-box" class="message-box hidden p-6 font-bold rounded-2xl shadow-2xl z-50 transition-all duration-500 text-center">
            <!-- Messages will be displayed here -->
        </div>

    </div>

    <script>
        // Define the puzzle data
        const puzzleData = {
            width: 13,
            height: 11,
            words: [
                {
                    word: "ENTREPRENEUR",
                    clue: "The name of our first module and mindset.",
                    direction: "across",
                    startRow: 0,
                    startCol: 0,
                    number: 1
                },
                {
                    word: "FEELING",
                    clue: "The difference between challenge & obstacle.",
                    direction: "across",
                    startRow: 4,
                    startCol: 0,
                    number: 2
                },
                {
                    word: "ENVIRONMENT",
                    clue: "What has a powerful impact on your success.",
                    direction: "down",
                    startRow: 0,
                    startCol: 4,
                    number: 3
                }
            ]
        };

        const crosswordContainer = document.getElementById('crossword-container');
        const acrossCluesList = document.getElementById('across-clues');
        const downCluesList = document.getElementById('down-clues');
        const checkButton = document.getElementById('check-button');
        const revealIButton = document.getElementById('reveal-i-button');
        const resetButton = document.getElementById('reset-button');
        const messageBox = document.getElementById('message-box');

        let highlightedCells = [];

        // Function to create the grid from the puzzle data
        function createGrid() {
            const grid = Array.from({ length: puzzleData.height }, () =>
                Array(puzzleData.width).fill(null)
            );

            // Populate the grid with word data (numbers and orientation)
            puzzleData.words.forEach(wordData => {
                let r = wordData.startRow;
                let c = wordData.startCol;

                if (grid[r][c] === null) {
                    grid[r][c] = { number: wordData.number };
                } else {
                    grid[r][c].number = wordData.number;
                }

                for (let i = 0; i < wordData.word.length; i++) {
                    if (wordData.direction === "across") {
                        grid[r][c + i] = grid[r][c + i] || {};
                        grid[r][c + i].wordAcross = wordData.word;
                    } else { // "down"
                        grid[r + i][c] = grid[r + i][c] || {};
                        grid[r + i][c].wordDown = wordData.word;
                    }
                }
            });

            // Create the HTML table
            const table = document.createElement('table');
            table.className = "puzzle-grid rounded-xl overflow-hidden";

            for (let r = 0; r < puzzleData.height; r++) {
                const row = document.createElement('tr');
                for (let c = 0; c < puzzleData.width; c++) {
                    const cell = document.createElement('td');
                    const cellData = grid[r][c];

                    if (cellData) {
                        const input = document.createElement('input');
                        input.type = 'text';
                        input.maxLength = 1;
                        input.className = "puzzle-cell";
                        input.dataset.row = r;
                        input.dataset.col = c;
                        
                        if (cellData.number) {
                            const numberSpan = document.createElement('span');
                            numberSpan.className = "cell-number";
                            numberSpan.textContent = cellData.number;
                            cell.appendChild(numberSpan);
                        }
                        cell.classList.add('bg-white');
                        cell.appendChild(input);
                    } else {
                        cell.className = "bg-black";
                    }

                    row.appendChild(cell);
                }
                table.appendChild(row);
            }

            crosswordContainer.appendChild(table);
        }

        // Function to create the clue lists
        function createClueLists() {
            const acrossClues = puzzleData.words.filter(word => word.direction === "across");
            const downClues = puzzleData.words.filter(word => word.direction === "down");

            acrossClues.sort((a, b) => a.number - b.number);
            downClues.sort((a, b) => a.number - b.number);

            acrossClues.forEach(clue => {
                const li = document.createElement('li');
                li.id = `clue-across-${clue.number}`;
                li.textContent = `${clue.number}. ${clue.clue}`;
                li.dataset.clueNumber = clue.number;
                li.dataset.direction = 'across';
                acrossCluesList.appendChild(li);
            });

            downClues.forEach(clue => {
                const li = document.createElement('li');
                li.id = `clue-down-${clue.number}`;
                li.textContent = `${clue.number}. ${clue.clue}`;
                li.dataset.clueNumber = clue.number;
                li.dataset.direction = 'down';
                downCluesList.appendChild(li);
            });
        }

        // Function to highlight cells based on a clue click
        function highlightCells(clueNumber, direction) {
            clearHighlighting();
            
            const wordData = puzzleData.words.find(w => w.number == clueNumber && w.direction === direction);
            if (!wordData) return;

            for (let i = 0; i < wordData.word.length; i++) {
                const r = wordData.startRow + (direction === "down" ? i : 0);
                const c = wordData.startCol + (direction === "across" ? i : 0);
                const cell = document.querySelector(`input[data-row='${r}'][data-col='${c}']`);
                if (cell) {
                    cell.classList.add('highlight-clue');
                    highlightedCells.push(cell);
                }
            }
        }
        
        // Function to check the answers
        function checkAnswers() {
            let allCorrect = true;

            // Clear previous highlighting
            document.querySelectorAll('.puzzle-cell').forEach(input => {
                input.classList.remove('correct-cell', 'incorrect-cell');
            });

            puzzleData.words.forEach(wordData => {
                let wordCorrect = true;

                for (let i = 0; i < wordData.word.length; i++) {
                    const r = wordData.startRow + (wordData.direction === "down" ? i : 0);
                    const c = wordData.startCol + (wordData.direction === "across" ? i : 0);
                    const input = document.querySelector(`input[data-row='${r}'][data-col='${c}']`);

                    if (input) {
                        const userChar = input.value.toUpperCase();
                        const correctChar = wordData.word[i].toUpperCase();

                        if (userChar === correctChar) {
                            input.classList.add('correct-cell');
                        } else {
                            input.classList.add('incorrect-cell');
                            wordCorrect = false;
                            allCorrect = false;
                        }
                    } else {
                        wordCorrect = false;
                        allCorrect = false;
                    }
                }
                
                if (wordCorrect) {
                    const clueElement = document.getElementById(`clue-${wordData.direction}-${wordData.number}`);
                    if (clueElement) {
                        clueElement.classList.add('completed');
                    }
                }
            });

            if (allCorrect) {
                showMessage("Congratulations!", "bg-green-500", "Share with your network!");
                revealIButton.style.display = 'block';
                checkButton.disabled = true;
                checkButton.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                showMessage("Try again!", "bg-red-500");
            }
        }
        
        // Function to reveal the letter 'I'
        function revealI() {
            puzzleData.words.forEach(wordData => {
                for (let i = 0; i < wordData.word.length; i++) {
                    if (wordData.word[i].toUpperCase() === 'I') {
                        const r = wordData.startRow + (wordData.direction === "down" ? i : 0);
                        const c = wordData.startCol + (wordData.direction === "across" ? i : 0);
                        const input = document.querySelector(`input[data-row='${r}'][data-col='${c}']`);
                        if (input) {
                            input.value = 'I';
                            input.classList.add('correct-cell');
                            input.disabled = true;
                        }
                    }
                }
            });
            showMessage("The letter 'I' has been revealed.", "bg-blue-500");
        }
        
        // Function to show a temporary message
        function showMessage(message, colorClass, secondaryMessage = "") {
            messageBox.innerHTML = `<span class="text-xl">${message}</span>`;
            if (secondaryMessage) {
                messageBox.innerHTML += `<br><span class="text-sm mt-2">${secondaryMessage}</span>`;
            }
            messageBox.className = `message-box p-6 font-bold rounded-2xl shadow-2xl z-50 transition-all duration-500 ${colorClass}`;
            messageBox.classList.remove('hidden');

            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 3000); // Hide after 3 seconds
        }

        // Function to clear any highlighting on the grid
        function clearHighlighting() {
            document.querySelectorAll('.highlight-clue').forEach(cell => cell.classList.remove('highlight-clue'));
        }

        // Function to reset the puzzle
        function resetPuzzle() {
            const inputs = document.querySelectorAll('.puzzle-cell');
            inputs.forEach(input => {
                input.value = '';
                input.style.backgroundColor = '';
                input.classList.remove('correct-cell', 'incorrect-cell');
                input.disabled = false;
            });
            const clues = document.querySelectorAll('.clue-list li');
            clues.forEach(clue => clue.classList.remove('completed'));
            clearHighlighting();
            revealIButton.style.display = 'none';
            checkButton.disabled = false;
            checkButton.classList.remove('opacity-50', 'cursor-not-allowed');
            showMessage("Puzzle reset!", "bg-gray-400");
        }

        // Add event listeners for puzzle interaction
        function addEventListeners() {
            checkButton.addEventListener('click', checkAnswers);
            revealIButton.addEventListener('click', revealI);
            resetButton.addEventListener('click', resetPuzzle);

            document.querySelectorAll('.clue-list li').forEach(clue => {
                clue.addEventListener('click', () => {
                    highlightCells(clue.dataset.clueNumber, clue.dataset.direction);
                });
            });
        }
        
        // Initial setup
        window.onload = function() {
            createGrid();
            createClueLists();
            addEventListeners();
        };
    </script>
</body>
</html>
